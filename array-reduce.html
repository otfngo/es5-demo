<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>reduce demo</title>
</head>
<body>
<script>
    // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce

    {
        let arr = [1, 2, 3, 4, 5]
        let sum = arr.reduce((acc, cur) => acc + cur)
        console.log(sum)
    }

    {
        let arr = [1, 2, 3, 4, 5]
        let sum = arr.reduce((acc, cur) => acc + cur, 0)
        console.log(sum)
    }

    {
        let arr = [[0, 1], [2, 3], [4, 5]]
        let flattened = arr.reduce((acc, cur) => acc.concat(cur))
        console.log(flattened)
    }

    {
        let arr = [[0, 1], [2, 3], [4, 5]]
        let flattened = arr.reduce((acc, cur) => acc.concat(cur), [])
        console.log(flattened)
    }

    {
        // 计算数组中每个元素出现的次数

        let names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice']

        let countedNames = names.reduce(function (allNames, name) {
            if (name in allNames) {
                allNames[name]++
            }
            else {
                allNames[name] = 1
            }
            return allNames
        }, {})

        console.log(countedNames)
    }

    {
        // 对于一个数组中的元素全是对象，
        // 每个对象又包含一个特定数组的情况，
        // 我们可以使用扩展运算符外加一个初始值的方式，来连接所有的特定数组

        let friends = [{
            name: 'Anna',
            books: ['Bible', 'Harry Potter'],
            age: 21
        }, {
            name: 'Bob',
            books: ['War and peace', 'Romeo and Juliet'],
            age: 26
        }, {
            name: 'Alice',
            books: ['The Lord of the Rings', 'The Shining'],
            age: 18
        }]

        let allbooks = friends.reduce(function (acc, cur) {
            return [...acc, ...cur.books]
        }, [])

        console.log(allbooks)
    }
</script>
</body>
</html>