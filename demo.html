<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>

<body>
  <input type="file" data-uploadto>
  <script>
  window.onload = function() {
    let elts = document.getElementsByTagName("input");
    for (let i = 0, len = elts.length; i < len; i++) {
      let input = elts[i];
      if (input.type !== "file") continue; //跳过所有非文件上传元素
      let url = input.getAttribute("data-uploadto");
      // if (!url) continue; //跳过任何没有URL的元素
      url = url || "./dist/data";

      input.addEventListener("change", function() { //当用户选择文件时
        let file = this.files[0]; //假设单个文件选择
        if (!file) return; //如果没有文件，不做任何事情
        let xhr = new XMLHttpRequest();
        xhr.open("POST", url);
        xhr.send(file); //把文件作为主体发送
      }, false)
    }
  }
  </script>
</body>

</html>
